/*! GuideChimp v2.6.2 | Copyright (C) 2020 Labs64 GmbH */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.guideChimpPluginBeacons=t():e.guideChimpPluginBeacons=t()}(window,function(){return d=[function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(e){return typeof e}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.exports=n},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},function(e,t,n){"use strict";var r=n(1),i=r(n(0)),o=r(n(2)),c=r(n(3)),s=r(n(6)),u=r(n(8)),a=r(n(10)),l=r(n(4)),f=r(n(12));function p(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(r);if(o){var n=(0,l.default)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,a.default)(this,e)}}n(20),e.exports=function(a,e){e.beacons=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new(function(e){(0,u.default)(n,e);var t=p(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"getDataBeacons",value:function(e){var i=this,t=(0,s.default)((0,l.default)(n.prototype),"getDataBeacons",this).call(this,e);return t.forEach(function(e){var t=e.id,n=e.element,r="",o="".concat(i.constructor.getBeaconDataPrefix(),"-tour"),a="".concat(i.constructor.getBeaconDataPrefix(),"-").concat(t,"-tour");n.attributes[o]&&(r=n.attributes[o].value);n.attributes[a]&&(r=n.attributes[a].value);r&&(e.tour=r)}),t}},{key:"createBeaconEl",value:function(o){var e=(0,s.default)((0,l.default)(n.prototype),"createBeaconEl",this).call(this,o);return o.tour&&e.addEventListener("click",function(){var e=null;if("string"==typeof o.tour||Array.isArray(o.tour))e=new a(o.tour);else if(o.tour instanceof a)e=o.tour;else if("object"===(0,i.default)(o.tour)){var t=o.tour,n=t.steps,r=t.options;e=new a(n,r)}e&&e.start()}),e}}]),n}(f.default))(e,t)}}},function(r,e,t){var a=t(7);function o(e,t,n){return"undefined"!=typeof Reflect&&Reflect.get?r.exports=o=Reflect.get:r.exports=o=function(e,t,n){var r=a(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},o(e,t,n||e)}r.exports=o},function(e,t,n){var r=n(4);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t,n){var r=n(9);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(n,e){function r(e,t){return n.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.exports=r},function(e,t,n){var r=n(0),o=n(11);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(0)),_slicedToArray2=_interopRequireDefault(__webpack_require__(13)),_defineProperty2=_interopRequireDefault(__webpack_require__(19)),_classCallCheck2=_interopRequireDefault(__webpack_require__(2)),_createClass2=_interopRequireDefault(__webpack_require__(3));function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){(0,_defineProperty2.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var cache=new Map,Beacons=function(){function Beacons(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,Beacons),this.beacons=[],this.options={},this.observers={},"undefined"!=typeof ResizeObserver&&(this.observers.elementResizeObserver=new ResizeObserver(function(){return t.refresh()})),this.cache=cache,this.setOptions(n),this.setBeacons(e),this.init()}return(0,_createClass2.default)(Beacons,[{key:"init",value:function(){}},{key:"setOptions",value:function(e){return this.options=_objectSpread(_objectSpread({},this.constructor.getDefaultOptions()),e),this}},{key:"setBeacons",value:function(e){var o=this;return this.removeAll(),this.beacons=!e||"string"==typeof e||Array.isArray(e)&&e.every(function(e){return"string"==typeof e})?this.getDataBeacons(e):this.getJsBeacons(e),this.beacons.length&&(this.beacons.forEach(function(e){var t=e.element;if(t){var n=o.getElement(t),r=o.createBeaconEl(e);r.classList.add(o.constructor.getHiddenClass()),o.constructor.isElementFixed(n)&&r.classList.add(o.constructor.getFixedClass()),(n.parentElement&&n.parentElement!==document.body?n.parentElement:document.body).append(r),o.cache.set(e,r),o.setBeaconPosition(n,r,e),o.observeResizeElement(n)}}),this.addOnWindowResizeListener()),this}},{key:"getBeacons",value:function(){return this.beacons}},{key:"getBeacon",value:function(t,e){var n=t&&"object"===(0,_typeof2.default)(t)?[t]:this.beacons.filter(function(e){return e.id===t});return(0,_slicedToArray2.default)(n,1)[0]||e}},{key:"getDataBeacons",value:function getDataBeacons(ids){var _this3=this,beaconsIds="string"==typeof ids?ids.split(",").map(function(e){return e.trim()}):ids,beaconsSelector=["[".concat(this.constructor.getBeaconDataPrefix(),"]")];beaconsIds&&(beaconsSelector=[],beaconsIds.forEach(function(e){beaconsSelector.push("[".concat(_this3.constructor.getBeaconDataPrefix(),"*='").concat(e,"']"))}));var beaconsEl=Array.from(document.querySelectorAll(beaconsSelector.join(","))),dataGlobalRegExp=new RegExp("^".concat(this.constructor.getBeaconDataPrefix(),"-([^-]+)$")),beacons=[];return beaconsEl.forEach(function(el){var beaconsIdsAttrValue=el.attributes[_this3.constructor.getBeaconDataPrefix()].value;if(beaconsIdsAttrValue){var elBeaconsIds=beaconsIdsAttrValue.split(",");elBeaconsIds.forEach(function(id){if(!beaconsIds||beaconsIds.includes(id)){for(var globalBeaconAttrs={},beaconAttrs={},dataBeaconRegExp=new RegExp("^".concat(_this3.constructor.getBeaconDataPrefix(),"-").concat(id,"-([^-]+)$")),j=0;j<el.attributes.length;j++){var _el$attributes$j=el.attributes[j],attrName=_el$attributes$j.name,attrValue=_el$attributes$j.value,isGlobalAttr=dataGlobalRegExp.test(attrName),isBeaconAttr=dataBeaconRegExp.test(attrName);if(isGlobalAttr){var _attrName$match=attrName.match(dataGlobalRegExp),_attrName$match2=(0,_slicedToArray2.default)(_attrName$match,2),shortAttrName=_attrName$match2[1];globalBeaconAttrs[shortAttrName]=attrValue}else if(isBeaconAttr){var _attrName$match3=attrName.match(dataBeaconRegExp),_attrName$match4=(0,_slicedToArray2.default)(_attrName$match3,2),_shortAttrName=_attrName$match4[1];beaconAttrs[_shortAttrName]=attrValue}}var beacon=_objectSpread(_objectSpread(_objectSpread({id:id,position:_this3.options.position},globalBeaconAttrs),beaconAttrs),{},{element:el}),onClick=beacon.onclick||beacon.onClick;onClick&&(delete beacon.onclick,beacon.onClick=function(e){var onClickCode=eval(onClick);"function"==typeof onClickCode&&onClickCode.call(e,beacon)}),beacons.push(beacon)}})}}),beacons}},{key:"getJsBeacons",value:function(e){return(Array.isArray(e)?e:[e]).map(function(e,t){return _objectSpread(_objectSpread({},e),{},{id:e.id||t})})}},{key:"createBeaconEl",value:function(t){var n=this,e=document.createElement("div"),r=t.class,o=t.onClick;return r&&(e.className=r),o&&(e.onclick=function(e){e.stopPropagation(),o.call(n,e,t)}),e.classList.add(this.constructor.getBeaconClass()),e}},{key:"getElement",value:function(e){return e instanceof HTMLElement?e:document.querySelector(e)}},{key:"setBeaconPosition",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:{},o=r.position,a=r.boundary;o=o||this.options.position,a="inner"===(a=a||this.options.boundary)?"inner":"outer";var i=e.offsetLeft,c=e.offsetTop,s=e.offsetWidth,u=e.offsetHeight,l=t.style,f=getComputedStyle(t),p=f.width,d=f.height;switch(p=parseInt(p,10),d=parseInt(d,10),t.removeAttribute("data-beacon-position"),t.removeAttribute("data-beacon-boundary"),t.setAttribute("data-beacon-position",o),t.setAttribute("data-beacon-boundary",a),o){case"top-left":"inner"===a?(l.left="".concat(i,"px"),l.top="".concat(c,"px")):(l.left="".concat(i-p,"px"),l.top="".concat(c-d,"px"));break;case"top":l.left="".concat(i+(s-p)/2,"px"),l.top="".concat("inner"===a?c:c-d,"px");break;case"top-right":"inner"===a?(l.left="".concat(s+i-p,"px"),l.top="".concat(c,"px")):(l.left="".concat(s+i,"px"),l.top="".concat(c-d,"px"));break;case"left":l.left="".concat("inner"===a?i:i-p,"px"),l.top="".concat(c+(u-d)/2,"px");break;default:case"center":t.setAttribute("data-beacon-position","center"),l.left="".concat(i+(s-p)/2,"px"),l.top="".concat(c+(u-d)/2,"px");break;case"right":l.left="".concat("inner"===a?i+s-p:i+s,"px"),l.top="".concat(c+(u-d)/2,"px");break;case"bottom-left":"inner"===a?(l.left="".concat(i,"px"),l.top="".concat(c+u-d,"px")):(l.left="".concat(i-p,"px"),l.top="".concat(c+u,"px"));break;case"bottom":l.left="".concat(i+(s-p)/2,"px"),l.top="".concat("inner"===a?c+u-d:c+u,"px");break;case"bottom-right":"inner"===a?(l.left="".concat(s+i-p,"px"),l.top="".concat(c+u-d,"px")):(l.left="".concat(s+i,"px"),l.top="".concat(c+u,"px"))}return this}},{key:"isCanShowBeacon",value:function(e){var t=e.canShow;return!(void 0!==t&&(!t||"function"==typeof t&&!1===t()))}},{key:"showAll",value:function(e){var t=this,n=0<arguments.length&&void 0!==e&&e;return this.beacons.forEach(function(e){t.show(e,n)}),this}},{key:"show",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t,r=this.getBeacon(e);if(r){var o=this.cache.get(r);o&&(n||this.isCanShowBeacon(r))&&o.classList.remove(this.constructor.getHiddenClass())}return this}},{key:"hideAll",value:function(){var t=this;return this.beacons.forEach(function(e){t.hide(e)}),this}},{key:"hide",value:function(e){var t=this.getBeacon(e);if(t){var n=this.cache.get(t);n&&n.classList.add(this.constructor.getHiddenClass())}return this}},{key:"removeAll",value:function(){var t=this;return this.beacons.forEach(function(e){t.remove(e)}),this.beacons=[],this.unobserveResizeAllElements(),this.removeOnWindowResizeListener(),this}},{key:"remove",value:function(e){var t=this.getBeacon(e),n=this.cache.get(t);if(n){n.parentNode.removeChild(n),-1!==this.beacons.indexOf(t)&&this.beacons.splice(this.beacons.indexOf(t),1),this.cache.delete(t);var r=this.getElement(t.element);r&&this.unobserveResizeElement(r)}return this.beacons.length||this.removeOnWindowResizeListener(),this}},{key:"refresh",value:function(){var o=this;return this.beacons.forEach(function(e){var t=e.element;if(t){var n=o.getElement(t),r=o.cache.get(e);n&&r&&o.setBeaconPosition(n,r,e)}}),this}},{key:"addOnWindowResizeListener",value:function(){return this.cache.set("onWindowResizeListener",this.getOnWindowResizeListener()),window.addEventListener("resize",this.cache.get("onWindowResizeListener"),!0),this}},{key:"getOnWindowResizeListener",value:function(){var e=this;return function(){return e.refresh()}}},{key:"removeOnWindowResizeListener",value:function(){return this.cache.has("onWindowResizeListener")&&(window.removeEventListener("resize",this.cache.get("onWindowResizeListener"),!0),this.cache.delete("onWindowResizeListener")),this}},{key:"observeResizeElement",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{box:"border-box"},r=this.observers.elementResizeObserver;return r&&r.observe(e,n),this}},{key:"unobserveResizeElement",value:function(e){var t=this.observers.elementResizeObserver;return t&&t.unobserve(e),this}},{key:"unobserveResizeAllElements",value:function(){var e=this.observers.elementResizeObserver;return e&&e.disconnect(),this}}],[{key:"getDefaultOptions",value:function(){return{position:"center",boundary:"inner"}}},{key:"getBeaconClass",value:function(){return"gc-beacon"}},{key:"getFixedClass",value:function(){return"gc-beacon-fixed"}},{key:"getHiddenClass",value:function(){return"gc-beacon-hidden"}},{key:"getBeaconDataPrefix",value:function(){return"data-beacon"}},{key:"isElementFixed",value:function(e){var t=e.parentNode;return!(!t||"HTML"===t.nodeName)&&("fixed"===getComputedStyle(e).getPropertyValue("position")||this.isElementFixed(t))}}]),Beacons}();exports.default=Beacons},function(e,t,n){var r=n(14),o=n(15),a=n(16),i=n(18);e.exports=function(e,t){return r(e)||o(e,t)||a(e,t)||i()}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}},function(e,t,n){var r=n(17);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){}],f={},g.m=d,g.c=f,g.d=function(e,t,n){g.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},g.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.t=function(t,e){if(1&e&&(t=g(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(g.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)g.d(n,r,function(e){return t[e]}.bind(null,r));return n},g.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return g.d(t,"a",t),t},g.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},g.p="",g(g.s=5);function g(e){if(f[e])return f[e].exports;var t=f[e]={i:e,l:!1,exports:{}};return d[e].call(t.exports,t,t.exports,g),t.l=!0,t.exports}var d,f});
//# sourceMappingURL=beacons.min.js.map